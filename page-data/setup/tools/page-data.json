{
    "componentChunkName": "component---src-pages-setup-tools-mdx",
    "path": "/setup/tools/",
    "result": {"pageContext":{"frontmatter":{"title":"UI Upgrade Helper tools"},"relativePagePath":"/setup/tools.mdx","titleType":"page","MdxNode":{"id":"746e7c10-93e4-50f4-a26e-acb772e8c652","children":[],"parent":"adcf9e8a-5841-56a2-ba8a-c558e718d73b","internal":{"content":"---\ntitle: UI Upgrade Helper tools\n---\n\nThe UI Upgrade Helper consists of a suite of tools. After the tools run, all modified files are listed and displayed in a diff view so you can keep or discard the changes. You can then manually apply the changes to your v8 environment.\n\nYou can run all of the tools sequentially with a single command.\n\n### CSS Rules Tool\n\nScans customer stylesheets and updates the CSS selectors to match the changes made when moving to the Carbon Design System.\n\n- Iterates over customer CSS files and applies the rules codified in [packages/css-rules-tool/rules/*.json](https://github.com/IBM/spm-ui-upgrade-helper/tree/main/packages/css-rules-tool/rules).\n\n#### Example CSS rules file\n\nIn this example, all the values in `SelectorRemove` are deleted. The values in `SelectorReplace` are replaced by `newValue`.\n\n```CSS\n    {\n      \"SelectorRemove\": [\n        { \"value\": \".delete-this-selector\" },\n        { \"value\": \".delete-this-selector .and-this\" }\n        { \"value\": \".delete-this-selector .and-this-as-well\" }\n      ],\n      \"SelectorReplace\": [\n        {\n          \"value\": \".foo .qux\",\n          \"newValue\": \".bar .qux\"\n        }\n      ]\n    }\n```\n\n#### Ordering of rules\n\nThe following steps determine the order of the rules:\n\n- All OOTB rules are loaded.\n- The rules are sorted by length, with the longest items first, inside each of their respective categories `SelectorRemove` and `SelectorReplace`.\n- The `SelectorRemove` rules are applied first, followed by the `SelectorReplace` rules.\n\n### Icon Replacer Tool\n\nScans customer source files for `V7` icons that were replaced by `V8` equivalents.\n\n- Iterates over customer source files and replaces the icons codified in [packages/icon-replacer-tool/icons_mappings.json](https://github.com/IBM/spm-ui-upgrade-helper/tree/main/packages/icon-replacer-tool/icon_mappings.json).\n\nExample icons mappings (`\"v7_FILENAME\":\"V8_FILENAME\"`):\n\n```CSS\n    {\n      \"Actions_Blue30_20px.png\": \"overflow-menu-horizontal--20-on-dark.svg\",\n      \"Actions_Blue50_20px.png\": \"overflow-menu-horizontal--20-enabled.svg\",\n      \"Calendar_Blue50_20px.png\": \"calendar--20-enabled.svg\",\n      \"Day_Blue50_20px.png\": \"calendar__day--20-enabled.svg\",\n      \"Gotodate_Blue50_20px.png\": \"calendar__go-to-date--20-enabled.svg\",\n    }\n```\n\nExample `V8` icon files:\n\n```XML\n\n    `/source_files/overflow-menu-horizontal--20-on-dark.svg`\n```\n\nAll `V7` icon files that are found are deleted and their `V8` equivalents are copied to the same location.\n\nReferences to the icon in customer source files, such as `.css`, `.js`, `jspx`, are also updated.\n\n### Window Size Tool\n\nThe Window Size Tool scans UIM files and applies rules to change modals to an appropriate size, based on their content. Where appropriate, UIM files are modified to resize modals to one of five sizes. The IBM Social Program Management Modal component in v8.0.1 has five sizes, the four standard [Carbon modal sizes](https://www.carbondesignsystem.com/components/modal/usage/#sizing), 'extra-small', 'small', 'medium', and 'large', and a custom 'extra-large' size. All modified files are listed and displayed in a diff view that shows the previous width value and the new width value. You can keep or discard the changes.\n\nThe Window Size Tool ignores UIM files that contain certain types of content:\n\n- Wizards.\n- An include of another UIM or VIM file.\n- Optionally, fields that render domains that are not specified in a provided allow list.\n\n#### The domain allow list\n\nSome content needs to be displayed on a larger modal and must not be resized. You can use a provided allow list to help you to filter out files that must not be resized. If you set the `containsAllowedDomainsOnly` parameter in a rule, the modal size is only reduced if all of the domains that are rendered in a UIM page are in the allow list.\n\nThe allow list contains the following field domains:\n\n| Domain | Description |\n|---- | ---- |\n|CODETABLE_CODE | Maps to a dropdown. |\n|INTERNAL_ID | Maps to an integer. |\n|SHORT_CODETABLE_CODE | Maps to a radio button. |\n|SVR_BOOLEAN | Maps to a checkbox. |\n|SVR_CHAR  | Maps to a single character value. |\n|SVR_DATE | Maps to a date input. |\n|SVR_DATETIME | Maps to a date time input. |\n|SVR_STRING | Maps to strings with a length of less than 300, to accommodate names, labels and comments. |\n|SVR_DOUBLE | Maps to a floating point number that corresponds to the Java:tm: primitive data type `double`. |\n|SVR_FLOAT | Maps to a floating point number that corresponds to the Java:tm: primitive data type `float`. |\n|SVR_INT8, SVR_INT16, SVR_INT32, SVR_INT64 | Maps to an integer. |\n|SVR_MONEY | Maps to a money value. |\n\n#### Window sizing rules\n\nThe window sizing rules define the criteria that are used to identify UIMs to resize. Where the rules are matched based on the width and content of a modal, a new size is set.\n\n- The order of the rules is important, as the first rule that matches is applied to each UIM file.\n- The rules for modal width and content are codified in [packages/window-size-tool/rules.json](https://github.com/IBM/spm-ui-upgrade-helper/blob/main/packages/window-size-tool/sizes.js).\n\n#### Example rules\n\nThis rule finds UIM files that contain modals with a width of 576px or lower (x-small or small modals), and contain either a two-column cluster or a four-column list, and changes the size to medium (`700` in the code).\n\n```XML\n  {\n    \"width\": \"<= 576\",\n    \"anyTerms\": [\n      \"//CLUSTER/@NUM_COLS = 2\", \n      \"count(//LIST[count(FIELD | CONTAINER) = 4]) > 0\"\n    ],\n   \"allTerms\": [\n      \"count(//INCLUDE) = 0\",\n      \"count(//MENU[@MODE='WIZARD_PROGRESS_BAR']) = 0\" \n     ],\n    \"target\": \"md\"\n  },\n```\n\nThis rule rule finds UIM files that contains modals with a width between 576 and 769 pixels ('medium' sized modals) and doesn't contain any clusters with more than one column, lists with more than two columns, includes of other files, and isn't part of a wizard. In addition, all domains that are rendered by this UIM file must be on the domain allow list to allow this file be modified.\n\n```JavaScript\n  {\n    \"width\": \"> 576 and <= 768\",\n    \"anyTerms\": [],\n    \"allTerms\": [\n      \"count(//CLUSTER[@NUM_COLS > 1 ]) = 0\",\n      \"count(//LIST[count(FIELD | CONTAINER) > 2]) = 0\",\n      \"count(//CLUSTER) > 0 or count(//LIST) > 0\",\n      \"count(//INCLUDE) = 0\",\n      \"count(//MENU[@MODE='WIZARD_PROGRESS_BAR']) = 0\"  \n     ],\n     \"containsAllowedDomainsOnly\":true,\n    \"target\": \"sm\"\n  },\n```\n\nWhere:\n\n- The `width` parameter is the modal width in pixels. This value is compared to the WINDOW_OPTIONS attribute of any `<PAGE>` or `<LINK>` elements that are found.\n- The `anyTerms` array defines XPath expressions that are run against each UIM file that matches the `width` expression. If any of the expressions are true, and all other rule criteria are met, the size of the UIM file is updated.\n- The `allTerms` array defines XPath expressions that are run against each UIM file that matches the `width` expression. If all of the expressions are true, and all other rule criteria is met, the size of that UIM file is updated.\n- The `containsAllowedDomainsOnly` parameter is set to true, so all domains that are rendered in the file must be on the allow list. The default value is false.\n- The `target` parameter is the new modal size: `xs` for extra-small, `sm` for small, `md` for medium/default, `lg` for large and `xlg` for extra-large.\n\nAfter Window Size Tool runs, the changes that you see are pixel values, such as 700, rather than a size name, such as `sm`.\nAs WINDOW_OPTIONS in UIM are expressed as pixels, each target size is translated to a pixel width value that is used to set the WINDOW_OPTIONS attribute, see [packages/window-size-tool/sizes.js](https://github.com/IBM/spm-ui-upgrade-helper/blob/main/packages/window-size-tool/sizes.js). The UIM rendering framework maps the pixel value of WINDOW_OPTIONS to a Carbon modal size when rendering. For more information about the mappings from WINDOW_OPTIONS to Carbon modal sizes, see [PAGE element](https://www.ibm.com/docs/en/spm/8.0.1?topic=reference-page-element).\n\n### Reviewing Window Size Tool changes\n\nAll modified files are listed and displayed in a diff view that shows the previous width value and the new width value. You can keep or discard the proposed changes or make your own changes.\n\nWINDOW_OPTIONS in UIM are expressed as pixels so changes are made to the WINDOW_OPTIONS `width` in pixels, such as 700, rather than a size, such as `sm`. Each target size in a rule is translated to an equivalent pixel width value that is used to set the WINDOW_OPTIONS attribute, see packages/window-size-tool/sizes.js.\n\nWhen a UIM file is rendered, the pixel value of WINDOW_OPTIONS maps to the appropriate Carbon modal size. For more information about the mappings, see the PAGE element.\nFor example, if a modal previously had a width of 550 (between 421 and 576), it was \"Small\". If the new modal size is 700 (between 577 and 768), it is now \"Medium\".\n\n#### Example UIM file modification\n\nThis example page originally had a width of 550, which according to the WINDOW_OPTIONS to Carbon modal sizes mappings, renders as a small sized modal. However, as the page contains a two-column cluster, according to the rules the size increases to 700 and it renders as a medium sized modal. You can accept the change, reject it or choose a different size.\n\n```diff\n- <PAGE PAGE_ID=\"myExamplePage\" WINDOW_OPTIONS=\"width=550\">\n+ <PAGE PAGE_ID=\"myExamplePage\" WINDOW_OPTIONS=\"width=700\">\n  <CLUSTER NUM_COLS=\"2\">\n    <FIELD>\n      …\n    </FIELD>\n    <FIELD>\n      …\n    </FIELD> \n</PAGE>\n```\n\nWhen reviewing a modified file, looking up its page preview in IBM Cúram Analysis Documentation Generator (CADG) can give you a quick visual of the layout of the existing page and whether the new size is appropriate. For example, if you see in the page preview that the modal contains a six column list and the width of the modal was updated to 1000 (large), then you can reason that the rules were applied as expected and the new size is appropriate. Note that while CADG page previews are not displayed with SPM v8 styling, (for example, v8 labels are always displayed above input fields), they still provide a useful visual of the structure and contents of a page.\n\n#### LINK Elements\n\nNot all UIM files that are modified by the tool have WINDOW_OPTIONS on the PAGE element. Typically, these UIM files contain one or more LINK elements, which can open a linked page as a modal by specifying WINDOW_OPTIONS on the LINK element.\n\nThe Window Size Tool evaluates the contents of the linked file. If a rule matches, then the WINDOW_OPTIONS on the LINK element are updated, and the UIM file that contains the LINK is modified.\n\n#### Example UIM file modification based on the content of a linked file\n\n```diff\n// myRegularPage.uim\n<PAGE PAGE_ID=\"myRegularPage\">\n-  <LINK PAGE_ID=\"myModalPage\" WINDOW_OPTIONS=\"width=550\">\n+  <LINK PAGE_ID=\"myModalPage\"WINDOW_OPTIONS=\"width=700\">\n    …\n  </LINK>\n</PAGE>\n```\n\n```XML\n// myModalPage.uim\n<PAGE PAGE_ID=\"myModalPage\">\n  <CLUSTER NUM_COLS=\"2\">\n    <FIELD>\n      …\n    </FIELD>\n    <FIELD>\n      …\n    </FIELD>\n</PAGE>\n```\n","type":"Mdx","contentDigest":"5d924f8bebcabfccc789caa30ef61f20","owner":"gatsby-plugin-mdx","counter":99},"frontmatter":{"title":"UI Upgrade Helper tools"},"exports":{},"rawBody":"---\ntitle: UI Upgrade Helper tools\n---\n\nThe UI Upgrade Helper consists of a suite of tools. After the tools run, all modified files are listed and displayed in a diff view so you can keep or discard the changes. You can then manually apply the changes to your v8 environment.\n\nYou can run all of the tools sequentially with a single command.\n\n### CSS Rules Tool\n\nScans customer stylesheets and updates the CSS selectors to match the changes made when moving to the Carbon Design System.\n\n- Iterates over customer CSS files and applies the rules codified in [packages/css-rules-tool/rules/*.json](https://github.com/IBM/spm-ui-upgrade-helper/tree/main/packages/css-rules-tool/rules).\n\n#### Example CSS rules file\n\nIn this example, all the values in `SelectorRemove` are deleted. The values in `SelectorReplace` are replaced by `newValue`.\n\n```CSS\n    {\n      \"SelectorRemove\": [\n        { \"value\": \".delete-this-selector\" },\n        { \"value\": \".delete-this-selector .and-this\" }\n        { \"value\": \".delete-this-selector .and-this-as-well\" }\n      ],\n      \"SelectorReplace\": [\n        {\n          \"value\": \".foo .qux\",\n          \"newValue\": \".bar .qux\"\n        }\n      ]\n    }\n```\n\n#### Ordering of rules\n\nThe following steps determine the order of the rules:\n\n- All OOTB rules are loaded.\n- The rules are sorted by length, with the longest items first, inside each of their respective categories `SelectorRemove` and `SelectorReplace`.\n- The `SelectorRemove` rules are applied first, followed by the `SelectorReplace` rules.\n\n### Icon Replacer Tool\n\nScans customer source files for `V7` icons that were replaced by `V8` equivalents.\n\n- Iterates over customer source files and replaces the icons codified in [packages/icon-replacer-tool/icons_mappings.json](https://github.com/IBM/spm-ui-upgrade-helper/tree/main/packages/icon-replacer-tool/icon_mappings.json).\n\nExample icons mappings (`\"v7_FILENAME\":\"V8_FILENAME\"`):\n\n```CSS\n    {\n      \"Actions_Blue30_20px.png\": \"overflow-menu-horizontal--20-on-dark.svg\",\n      \"Actions_Blue50_20px.png\": \"overflow-menu-horizontal--20-enabled.svg\",\n      \"Calendar_Blue50_20px.png\": \"calendar--20-enabled.svg\",\n      \"Day_Blue50_20px.png\": \"calendar__day--20-enabled.svg\",\n      \"Gotodate_Blue50_20px.png\": \"calendar__go-to-date--20-enabled.svg\",\n    }\n```\n\nExample `V8` icon files:\n\n```XML\n\n    `/source_files/overflow-menu-horizontal--20-on-dark.svg`\n```\n\nAll `V7` icon files that are found are deleted and their `V8` equivalents are copied to the same location.\n\nReferences to the icon in customer source files, such as `.css`, `.js`, `jspx`, are also updated.\n\n### Window Size Tool\n\nThe Window Size Tool scans UIM files and applies rules to change modals to an appropriate size, based on their content. Where appropriate, UIM files are modified to resize modals to one of five sizes. The IBM Social Program Management Modal component in v8.0.1 has five sizes, the four standard [Carbon modal sizes](https://www.carbondesignsystem.com/components/modal/usage/#sizing), 'extra-small', 'small', 'medium', and 'large', and a custom 'extra-large' size. All modified files are listed and displayed in a diff view that shows the previous width value and the new width value. You can keep or discard the changes.\n\nThe Window Size Tool ignores UIM files that contain certain types of content:\n\n- Wizards.\n- An include of another UIM or VIM file.\n- Optionally, fields that render domains that are not specified in a provided allow list.\n\n#### The domain allow list\n\nSome content needs to be displayed on a larger modal and must not be resized. You can use a provided allow list to help you to filter out files that must not be resized. If you set the `containsAllowedDomainsOnly` parameter in a rule, the modal size is only reduced if all of the domains that are rendered in a UIM page are in the allow list.\n\nThe allow list contains the following field domains:\n\n| Domain | Description |\n|---- | ---- |\n|CODETABLE_CODE | Maps to a dropdown. |\n|INTERNAL_ID | Maps to an integer. |\n|SHORT_CODETABLE_CODE | Maps to a radio button. |\n|SVR_BOOLEAN | Maps to a checkbox. |\n|SVR_CHAR  | Maps to a single character value. |\n|SVR_DATE | Maps to a date input. |\n|SVR_DATETIME | Maps to a date time input. |\n|SVR_STRING | Maps to strings with a length of less than 300, to accommodate names, labels and comments. |\n|SVR_DOUBLE | Maps to a floating point number that corresponds to the Java:tm: primitive data type `double`. |\n|SVR_FLOAT | Maps to a floating point number that corresponds to the Java:tm: primitive data type `float`. |\n|SVR_INT8, SVR_INT16, SVR_INT32, SVR_INT64 | Maps to an integer. |\n|SVR_MONEY | Maps to a money value. |\n\n#### Window sizing rules\n\nThe window sizing rules define the criteria that are used to identify UIMs to resize. Where the rules are matched based on the width and content of a modal, a new size is set.\n\n- The order of the rules is important, as the first rule that matches is applied to each UIM file.\n- The rules for modal width and content are codified in [packages/window-size-tool/rules.json](https://github.com/IBM/spm-ui-upgrade-helper/blob/main/packages/window-size-tool/sizes.js).\n\n#### Example rules\n\nThis rule finds UIM files that contain modals with a width of 576px or lower (x-small or small modals), and contain either a two-column cluster or a four-column list, and changes the size to medium (`700` in the code).\n\n```XML\n  {\n    \"width\": \"<= 576\",\n    \"anyTerms\": [\n      \"//CLUSTER/@NUM_COLS = 2\", \n      \"count(//LIST[count(FIELD | CONTAINER) = 4]) > 0\"\n    ],\n   \"allTerms\": [\n      \"count(//INCLUDE) = 0\",\n      \"count(//MENU[@MODE='WIZARD_PROGRESS_BAR']) = 0\" \n     ],\n    \"target\": \"md\"\n  },\n```\n\nThis rule rule finds UIM files that contains modals with a width between 576 and 769 pixels ('medium' sized modals) and doesn't contain any clusters with more than one column, lists with more than two columns, includes of other files, and isn't part of a wizard. In addition, all domains that are rendered by this UIM file must be on the domain allow list to allow this file be modified.\n\n```JavaScript\n  {\n    \"width\": \"> 576 and <= 768\",\n    \"anyTerms\": [],\n    \"allTerms\": [\n      \"count(//CLUSTER[@NUM_COLS > 1 ]) = 0\",\n      \"count(//LIST[count(FIELD | CONTAINER) > 2]) = 0\",\n      \"count(//CLUSTER) > 0 or count(//LIST) > 0\",\n      \"count(//INCLUDE) = 0\",\n      \"count(//MENU[@MODE='WIZARD_PROGRESS_BAR']) = 0\"  \n     ],\n     \"containsAllowedDomainsOnly\":true,\n    \"target\": \"sm\"\n  },\n```\n\nWhere:\n\n- The `width` parameter is the modal width in pixels. This value is compared to the WINDOW_OPTIONS attribute of any `<PAGE>` or `<LINK>` elements that are found.\n- The `anyTerms` array defines XPath expressions that are run against each UIM file that matches the `width` expression. If any of the expressions are true, and all other rule criteria are met, the size of the UIM file is updated.\n- The `allTerms` array defines XPath expressions that are run against each UIM file that matches the `width` expression. If all of the expressions are true, and all other rule criteria is met, the size of that UIM file is updated.\n- The `containsAllowedDomainsOnly` parameter is set to true, so all domains that are rendered in the file must be on the allow list. The default value is false.\n- The `target` parameter is the new modal size: `xs` for extra-small, `sm` for small, `md` for medium/default, `lg` for large and `xlg` for extra-large.\n\nAfter Window Size Tool runs, the changes that you see are pixel values, such as 700, rather than a size name, such as `sm`.\nAs WINDOW_OPTIONS in UIM are expressed as pixels, each target size is translated to a pixel width value that is used to set the WINDOW_OPTIONS attribute, see [packages/window-size-tool/sizes.js](https://github.com/IBM/spm-ui-upgrade-helper/blob/main/packages/window-size-tool/sizes.js). The UIM rendering framework maps the pixel value of WINDOW_OPTIONS to a Carbon modal size when rendering. For more information about the mappings from WINDOW_OPTIONS to Carbon modal sizes, see [PAGE element](https://www.ibm.com/docs/en/spm/8.0.1?topic=reference-page-element).\n\n### Reviewing Window Size Tool changes\n\nAll modified files are listed and displayed in a diff view that shows the previous width value and the new width value. You can keep or discard the proposed changes or make your own changes.\n\nWINDOW_OPTIONS in UIM are expressed as pixels so changes are made to the WINDOW_OPTIONS `width` in pixels, such as 700, rather than a size, such as `sm`. Each target size in a rule is translated to an equivalent pixel width value that is used to set the WINDOW_OPTIONS attribute, see packages/window-size-tool/sizes.js.\n\nWhen a UIM file is rendered, the pixel value of WINDOW_OPTIONS maps to the appropriate Carbon modal size. For more information about the mappings, see the PAGE element.\nFor example, if a modal previously had a width of 550 (between 421 and 576), it was \"Small\". If the new modal size is 700 (between 577 and 768), it is now \"Medium\".\n\n#### Example UIM file modification\n\nThis example page originally had a width of 550, which according to the WINDOW_OPTIONS to Carbon modal sizes mappings, renders as a small sized modal. However, as the page contains a two-column cluster, according to the rules the size increases to 700 and it renders as a medium sized modal. You can accept the change, reject it or choose a different size.\n\n```diff\n- <PAGE PAGE_ID=\"myExamplePage\" WINDOW_OPTIONS=\"width=550\">\n+ <PAGE PAGE_ID=\"myExamplePage\" WINDOW_OPTIONS=\"width=700\">\n  <CLUSTER NUM_COLS=\"2\">\n    <FIELD>\n      …\n    </FIELD>\n    <FIELD>\n      …\n    </FIELD> \n</PAGE>\n```\n\nWhen reviewing a modified file, looking up its page preview in IBM Cúram Analysis Documentation Generator (CADG) can give you a quick visual of the layout of the existing page and whether the new size is appropriate. For example, if you see in the page preview that the modal contains a six column list and the width of the modal was updated to 1000 (large), then you can reason that the rules were applied as expected and the new size is appropriate. Note that while CADG page previews are not displayed with SPM v8 styling, (for example, v8 labels are always displayed above input fields), they still provide a useful visual of the structure and contents of a page.\n\n#### LINK Elements\n\nNot all UIM files that are modified by the tool have WINDOW_OPTIONS on the PAGE element. Typically, these UIM files contain one or more LINK elements, which can open a linked page as a modal by specifying WINDOW_OPTIONS on the LINK element.\n\nThe Window Size Tool evaluates the contents of the linked file. If a rule matches, then the WINDOW_OPTIONS on the LINK element are updated, and the UIM file that contains the LINK is modified.\n\n#### Example UIM file modification based on the content of a linked file\n\n```diff\n// myRegularPage.uim\n<PAGE PAGE_ID=\"myRegularPage\">\n-  <LINK PAGE_ID=\"myModalPage\" WINDOW_OPTIONS=\"width=550\">\n+  <LINK PAGE_ID=\"myModalPage\"WINDOW_OPTIONS=\"width=700\">\n    …\n  </LINK>\n</PAGE>\n```\n\n```XML\n// myModalPage.uim\n<PAGE PAGE_ID=\"myModalPage\">\n  <CLUSTER NUM_COLS=\"2\">\n    <FIELD>\n      …\n    </FIELD>\n    <FIELD>\n      …\n    </FIELD>\n</PAGE>\n```\n","fileAbsolutePath":"/home/runner/work/spm-ui-upgrade-helper/spm-ui-upgrade-helper/packages/gatsby-docs/src/pages/setup/tools.mdx"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}