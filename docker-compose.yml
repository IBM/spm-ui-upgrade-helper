version: '3.8'
services:
  spm-ui-upgrade-helper:
    build: .
    image: spm-ui-upgrade-helper:${TAG}
    container_name: spm-ui-upgrade-helper
    ports:
      - "3000:3000"  
    depends_on: 
      - parser_nodefront
  parser_beanparser:
    build: ./packages/window-size-tool/parser
    image: spm-ui-upgrade-helper_beanparser:${TAG}
    container_name: spm-ui-upgrade-helper_beanparser
    volumes:
      - ./packages/window-size-tool/parser/real_input:/usr/src/sabparser/input
  parser_nodefront:
    build:
      context: ./packages/window-size-tool/parser/frontend
    image: spm-ui-upgrade-helper_nodefront:${TAG}
    container_name: spm-ui-upgrade-helper_nodefront
    ports:
      - "4005:4005"
    volumes:
      - ./packages/window-size-tool/parser/frontend/src:/app/src
    depends_on:
      -  parser_beanparser